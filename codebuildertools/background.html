<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Email Footer + CTA Wrapper Builder</title>
  <style>
    * { box-sizing: border-box; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; margin: 0; background: #f6f7fb; color: #222; }
    header { padding: 16px 20px; border-bottom: 1px solid #e6e8ef; background: #fff; position: sticky; top: 0; z-index: 10; }
    header h1 { margin: 0; font-size: 18px; font-weight: 600; }

    .app { display: grid; grid-template-columns: 360px 1fr; gap: 20px; padding: 20px; }
    @media (max-width: 1080px) { .app { grid-template-columns: 1fr; } }

    .panel { background: #fff; border: 1px solid #e6e8ef; border-radius: 14px; padding: 16px; box-shadow: 0 2px 6px rgba(0,0,0,.04); }
    .panel h2 { margin: 4px 0 12px; font-size: 16px; }
    .muted { color: #6b7280; font-size: 12px; }

    .group { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 14px; }
    .group.thirds { grid-template-columns: 1fr 1fr 1fr; }
    .group.full { grid-template-columns: 1fr; }
    label { font-size: 12px; color: #4a5568; display: block; margin-bottom: 6px; }
    input[type="text"], input[type="number"], select { width: 100%; padding: 10px 12px; border: 1px solid #d9deea; border-radius: 10px; font-size: 14px; background: #fbfcff; }
    input[type="color"] { width: 100%; height: 40px; padding: 0; border: 1px solid #d9deea; border-radius: 10px; background: #fbfcff; }
    .row { display: flex; gap: 10px; align-items: center; margin-bottom: 14px; }
    .row > * { flex: 1; }
    .btn { appearance: none; border: 1px solid #1b72ff; background: #1b72ff; color: #fff; padding: 10px 14px; border-radius: 10px; font-weight: 600; cursor: pointer; }
    .btn.secondary { background: #fff; color: #1b72ff; }
    .btn.destructive { border-color: #ef4444; color: #ef4444; background: #fff; }
    .btn:active { transform: translateY(1px); }

    .stage { background: #fff; border: 1px solid #e6e8ef; border-radius: 14px; padding: 18px; overflow: auto; box-shadow: 0 2px 6px rgba(0,0,0,.04); margin-bottom: 12px; }
    .code { background: #0b1020; color: #eaf2ff; padding: 12px; border-radius: 10px; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 12px; overflow: auto; max-height: 420px; border: 1px solid #111526; }
    .right-actions { display: flex; gap: 10px; justify-content: flex-end; }

    .icon-row { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 10px; }
    .icon-row small { color: #6b7280; }
    .icon-wrap { border: 1px dashed #d9deea; border-radius: 10px; padding: 10px; }
  </style>
</head>
<body>
  <header>
    <h1>Email Footer + CTA Wrapper Builder — client‑only</h1>
  </header>

  <div class="app">
    <section class="panel" id="controls">
      <h2>Wrapper</h2>
      <div class="group">
        <div>
          <label>Background Image URL</label>
          <input id="bgUrl" type="text" value="https://prod.cdn.everyaction.com/images/van/NGP/NGP39/1/88965/images/Copy%20of%20PA%20Dems%20Wrapper%20%281%29.png" />
        </div>
        <div>
          <label>Max Width (px)</label>
          <input id="maxWidth" type="number" min="320" value="800" />
        </div>
      </div>

      <h2>Social Icons</h2>
      <div class="group thirds">
        <div>
          <label>Icon Size (px)</label>
          <input id="iconSize" type="number" min="16" value="50" />
        </div>
        <div>
          <label>Horizontal Gap (px)</label>
          <input id="iconGap" type="number" min="0" value="0" />
        </div>
        <div>
          <label>Row Padding (px)</label>
          <input id="iconPad" type="number" min="0" value="0" />
        </div>
      </div>
      <div id="icons"></div>
      <div class="row">
        <button class="btn secondary" id="addIcon">+ Add Icon</button>
        <button class="btn destructive" id="clearIcons">Clear</button>
      </div>

      <h2>Primary Button</h2>
      <div class="group">
        <div>
          <label>Label</label>
          <input id="btn1Label" type="text" value="DONATE NOW" />
        </div>
        <div>
          <label>Link (href)</label>
          <input id="btn1Href" type="text" value="https://www.newblueinteractive.com" />
        </div>
      </div>
      <div class="group thirds">
        <div>
          <label>Width (px)</label>
          <input id="btn1W" type="number" min="120" value="200" />
        </div>
        <div>
          <label>Height (px)</label>
          <input id="btn1H" type="number" min="36" value="50" />
        </div>
        <div>
          <label>Radius (%)</label>
          <input id="btn1R" type="number" min="0" value="8" />
        </div>
      </div>
      <div class="group">
        <div>
          <label>Background</label>
          <input id="btn1Bg" type="color" value="#25408F" />
        </div>
        <div>
          <label>Text Color</label>
          <input id="btn1Text" type="color" value="#ffffff" />
        </div>
      </div>
      <div class="group">
        <div>
          <label>Border Color</label>
          <input id="btn1Border" type="color" value="#ffffff" />
        </div>
        <div>
          <label>Underline Text?</label>
          <select id="btn1Underline"><option value="underline">Yes</option><option value="none">No</option></select>
        </div>
      </div>

      <h2>Secondary Button</h2>
      <div class="group">
        <div>
          <label>Label</label>
          <input id="btn2Label" type="text" value="VOLUNTEER" />
        </div>
        <div>
          <label>Link (href)</label>
          <input id="btn2Href" type="text" value="https://www.newblueinteractive.com" />
        </div>
      </div>
      <div class="group thirds">
        <div>
          <label>Width (px)</label>
          <input id="btn2W" type="number" min="120" value="200" />
        </div>
        <div>
          <label>Height (px)</label>
          <input id="btn2H" type="number" min="36" value="50" />
        </div>
        <div>
          <label>Radius (%)</label>
          <input id="btn2R" type="number" min="0" value="8" />
        </div>
      </div>
      <div class="group">
        <div>
          <label>Background</label>
          <input id="btn2Bg" type="color" value="#25408F" />
        </div>
        <div>
          <label>Text Color</label>
          <input id="btn2Text" type="color" value="#ffffff" />
        </div>
      </div>
      <div class="group">
        <div>
          <label>Border Color</label>
          <input id="btn2Border" type="color" value="#ffffff" />
        </div>
        <div>
          <label>Underline Text?</label>
          <select id="btn2Underline"><option value="underline">Yes</option><option value="none">No</option></select>
        </div>
      </div>

      <h2>Footer</h2>
      <div class="group full">
        <div>
          <label>Paid For By</label>
          <input id="paidFor" type="text" value="PAID FOR BY YOUR CAMPAIGN" />
        </div>
      </div>
      <div class="group full">
        <div>
          <label>Address Line</label>
          <input id="address" type="text" value="New Blue Interactive | PO Box 669 | Glen Cove, NY 11542" />
        </div>
      </div>
      <div class="group">
        <div>
          <label>Fewer Emails URL</label>
          <input id="linkFewer" type="text" value="https://www.newblueinteractive.com" />
        </div>
        <div>
          <label>Donate URL</label>
          <input id="linkDonate" type="text" value="https://www.newblueinteractive.com" />
        </div>
      </div>
      <div class="group full">
        <div>
          <label>Unsubscribe URL</label>
          <input id="linkUnsub" type="text" value="https://www.newblueinteractive.com" />
        </div>
      </div>

      <div class="row">
        <button class="btn" id="copyHtml">Copy HTML</button>
        <button class="btn secondary" id="reset">Reset</button>
      </div>
      <p class="muted">This generates a table‑based, inline‑styled block with VML fallbacks for Outlook. Paste into your ESP/editor.</p>
    </section>

    <section>
      <div class="stage">
        <div class="muted" style="margin-bottom:6px;">Live Preview</div>
        <div id="preview"></div>
      </div>

      <div class="panel">
        <div class="right-actions"><button class="btn" id="copyHtml2">Copy HTML</button></div>
        <pre class="code" id="codeBlock"></pre>
      </div>
    </section>
  </div>

  <script>
    const el = id => document.getElementById(id);

    const defaultIcons = [
      { alt: 'bluesky',  src: 'https://prod.cdn.everyaction.com/images/van/NGP/NGP39/1/88708/images/Bluesky%20Circle_2.png', href: '' },
      { alt: 'facebook', src: 'https://prod.cdn.everyaction.com/images/van/NGP/NGP39/1/88708/images/Facebook%20Circle_2.png', href: '' },
      { alt: 'instagram',src: 'https://prod.cdn.everyaction.com/images/van/NGP/NGP39/1/88708/images/Instagram%20Circle_2.png', href: '' },
      { alt: 'tiktok',   src: 'https://prod.cdn.everyaction.com/images/van/NGP/NGP39/1/88708/images/TikTok%20Circle_2.png', href: '' },
      { alt: 'x',        src: 'https://prod.cdn.everyaction.com/images/van/NGP/NGP39/1/88708/images/X%20Circle_3.png', href: '' },
      { alt: 'youtube',  src: 'https://prod.cdn.everyaction.com/images/van/NGP/NGP39/1/88708/images/YouTube%20Circle_2.png', href: '' }
    ];

    const state = {
      bgUrl: 'https://prod.cdn.everyaction.com/images/van/NGP/NGP39/1/88965/images/Copy%20of%20PA%20Dems%20Wrapper%20%281%29.png',
      maxWidth: 800,
      iconSize: 50,
      iconGap: 0,
      iconPad: 0,
      icons: JSON.parse(JSON.stringify(defaultIcons)),
      btn1Label: 'DONATE NOW', btn1Href: 'https://www.newblueinteractive.com', btn1W: 200, btn1H: 50, btn1R: 8, btn1Bg: '#25408F', btn1Text: '#ffffff', btn1Border: '#ffffff', btn1Underline: 'underline',
      btn2Label: 'VOLUNTEER',  btn2Href: 'https://www.newblueinteractive.com', btn2W: 200, btn2H: 50, btn2R: 8, btn2Bg: '#25408F', btn2Text: '#ffffff', btn2Border: '#ffffff', btn2Underline: 'underline',
      paidFor: 'PAID FOR BY YOUR CAMPAIGN',
      address: 'New Blue Interactive | PO Box 669 | Glen Cove, NY 11542',
      linkFewer: 'https://www.newblueinteractive.com',
      linkDonate: 'https://www.newblueinteractive.com',
      linkUnsub: 'https://www.newblueinteractive.com'
    };

    function bindBasics() {
      ['bgUrl','maxWidth','iconSize','iconGap','iconPad','btn1Label','btn1Href','btn1W','btn1H','btn1R','btn1Bg','btn1Text','btn1Border','btn1Underline','btn2Label','btn2Href','btn2W','btn2H','btn2R','btn2Bg','btn2Text','btn2Border','btn2Underline','paidFor','address','linkFewer','linkDonate','linkUnsub']
      .forEach(key => {
        const node = el(key);
        node.addEventListener('input', () => {
          state[key] = (node.type === 'number') ? Number(node.value) : node.value;
          render();
        });
      });

      el('copyHtml').addEventListener('click', copyHtml);
      el('copyHtml2').addEventListener('click', copyHtml);
      el('reset').addEventListener('click', reset);

      el('addIcon').addEventListener('click', () => {
        state.icons.push({ alt: 'icon', src: '', href: '' });
        drawIconEditors();
        render();
      });
      el('clearIcons').addEventListener('click', () => {
        state.icons = [];
        drawIconEditors();
        render();
      });
    }

    function drawIconEditors() {
      const container = document.getElementById('icons');
      container.innerHTML = '';
      state.icons.forEach((ic, idx) => {
        const wrap = document.createElement('div');
        wrap.className = 'icon-wrap';
        wrap.innerHTML = `
          <div class="icon-row">
            <div>
              <label>Alt</label>
              <input type="text" data-k="alt" data-i="${idx}" value="${escapeHtml(ic.alt)}" />
              <small>Describe the icon (accessibility).</small>
            </div>
            <div>
              <label>Link (optional)</label>
              <input type="text" data-k="href" data-i="${idx}" value="${escapeAttr(ic.href)}" />
              <small>Wraps the icon in an <a> if provided.</small>
            </div>
          </div>
          <div class="icon-row">
            <div>
              <label>Image URL</label>
              <input type="text" data-k="src" data-i="${idx}" value="${escapeAttr(ic.src)}" />
            </div>
            <div>
              <button class="btn destructive" data-remove="${idx}" type="button">Remove</button>
            </div>
          </div>`;
        container.appendChild(wrap);
      });

      // bind field updates
      container.querySelectorAll('input[type="text"]').forEach(inp => {
        inp.addEventListener('input', () => {
          const i = Number(inp.getAttribute('data-i'));
          const k = inp.getAttribute('data-k');
          state.icons[i][k] = inp.value;
          render();
        });
      });
      container.querySelectorAll('button[data-remove]').forEach(btn => {
        btn.addEventListener('click', () => {
          const i = Number(btn.getAttribute('data-remove'));
          state.icons.splice(i, 1);
          drawIconEditors();
          render();
        });
      });
    }

    function escapeHtml(str) { return String(str).replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;'); }
    function escapeAttr(str) { return String(str).replaceAll('"','&quot;'); }

    function vmlButton({href,label,w,h,r,bg,text,border,underline}) {
      // VML width/height in px, arcsize in %
      return `<!--[if mso]>
<v:roundrect xmlns:v="urn:schemas-microsoft-com:vml" href="${href}" style="height:${h}px;v-text-anchor:middle;width:${w}px;" arcsize="${r}%" strokecolor="${border}" fillcolor="${bg}">
  <w:anchorlock/>
  <center style="color:${text}; font-family:Helvetica, Arial, sans-serif; font-size:18px; font-weight:bold;">${escapeHtml(label)}</center>
</v:roundrect>
<![endif]--><!--[if !mso]><!-- --><a href="${href}" style="display:inline-block; background-color:${bg}; color:${text}; font-family: Helvetica, Arial, sans-serif; font-size:18px; font-weight:bold; text-decoration:${underline}; width:${w}px; line-height:${h}px; text-align:center; border:2px solid ${border}; border-radius:${Math.round(w*0)+5}px; border-radius:${r}%" target="_blank">${escapeHtml(label)}</a> <!--<![endif]-->`;
    }

    function buildSocialRow() {
      const s = state;
      const tds = s.icons.map(ic => {
        const img = `<img alt="${escapeAttr(ic.alt || '')}" src="${escapeAttr(ic.src || '')}" style="display: block;" width="${s.iconSize}" />`;
        const cell = ic.href ? `<a href="${escapeAttr(ic.href)}" target="_blank">${img}</a>` : img;
        return `<td style="padding:${s.iconPad}px ${s.iconGap/2}px;">${cell}</td>`;
      }).join('\n');

      return `
<center>
  <table border="0" cellpadding="0" cellspacing="0" center>
    <tbody>
      <tr>
        ${tds}
      </tr>
    </tbody>
  </table>
</center>`;
    }

    function markup() {
      const s = state;
      const btn1 = vmlButton({ href: s.btn1Href, label: s.btn1Label, w: s.btn1W, h: s.btn1H, r: s.btn1R, bg: s.btn1Bg, text: s.btn1Text, border: s.btn1Border, underline: s.btn1Underline });
      const btn2 = vmlButton({ href: s.btn2Href, label: s.btn2Label, w: s.btn2W, h: s.btn2H, r: s.btn2R, bg: s.btn2Bg, text: s.btn2Text, border: s.btn2Border, underline: s.btn2Underline });

      // IMPORTANT: Do NOT include <body> tags inside this snippet; nested <body> would break the builder page
      return `
<center>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
  <tbody>
    <tr>
      <td align="center" style="background-image: url(${s.bgUrl}); max-width: ${s.maxWidth}px; background-size: cover;">
        <!--[if (gte mso 9)|(IE)]>
        <table align="center" border="0" cellspacing="0" cellpadding="0" >
        <tr>
        <td align="center" valign="top">
        <![endif]-->

<hr style="max-width: ${Math.max(0,s.maxWidth-50)}px;" />&nbsp;
${buildSocialRow()}

<table align="center" cellpadding="0" cellspacing="0">
  <tbody>
    <tr>
      <td align="center" style="padding: 15px;">
        <table align="center" cellpadding="10" cellspacing="0">
          <tbody>
            <tr>
              <td align="center">${btn1}</td>
            </tr>
            <tr>
              <td align="center">${btn2}</td>
            </tr>
          </tbody>
        </table>
        <br />
        <!-- FOOTER -->
        <table align="center" cellpadding="8" cellspacing="0" style="border: 1px solid black; text-align: center; max-width: 360px; font-family: Helvetica, Arial, sans-serif; font-size: 12px; line-height: 1.2em;" width="100%">
          <tbody>
            <tr>
              <td>${escapeHtml(s.paidFor)}</td>
            </tr>
          </tbody>
        </table>

        <table align="center" border="0" cellpadding="0" cellspacing="0" style="max-width: ${Math.max(0,s.maxWidth-50)}px;" width="100%">
          <tbody>
            <tr>
              <td align="center" style="font-family: Helvetica, Arial, sans-serif; font-size:12px;">
                <p style="margin-top: 10px;">${escapeHtml(s.address)}</p>
              </td>
            </tr>
            <tr>
              <td align="center" style="font-family: Helvetica, Arial, sans-serif; font-size:12px;">
                <p style="margin-top: 10px;"><a href="${escapeAttr(s.linkFewer)}" style="color: #000000; text-decoration: underline;">Fewer Emails</a> | <a href="${escapeAttr(s.linkDonate)}" style="color: #000000; text-decoration: underline;">Donate</a></p>
              </td>
            </tr>
            <tr>
              <td align="center" style="font-family: Helvetica, Arial, sans-serif; font-size:12px;">
                <p style="margin-top: 10px;"><a href="${escapeAttr(s.linkUnsub)}" style="color: #000000; text-decoration: underline;">Unsubscribe</a></p>
              </td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
  </tbody>
</table>
</center>`;
    }

    function render() {
      const html = markup().trim();
      document.getElementById('preview').innerHTML = html;
      document.getElementById('codeBlock').textContent = html;
    }

    async function copyHtml() {
      const html = markup().trim();
      try {
        await navigator.clipboard.writeText(html);
        toast('HTML copied to clipboard');
      } catch (e) {
        const range = document.createRange();
        range.selectNodeContents(document.getElementById('codeBlock'));
        const sel = window.getSelection();
        sel.removeAllRanges();
        sel.addRange(range);
        toast('Select + Copy the code');
      }
    }

    function reset() {
      Object.assign(state, {
        bgUrl: 'https://prod.cdn.everyaction.com/images/van/NGP/NGP39/1/88965/images/Copy%20of%20PA%20Dems%20Wrapper%20%281%29.png',
        maxWidth: 800,
        iconSize: 50,
        iconGap: 0,
        iconPad: 0,
        icons: JSON.parse(JSON.stringify(defaultIcons)),
        btn1Label: 'DONATE NOW', btn1Href: 'https://www.newblueinteractive.com', btn1W: 200, btn1H: 50, btn1R: 8, btn1Bg: '#25408F', btn1Text: '#ffffff', btn1Border: '#ffffff', btn1Underline: 'underline',
        btn2Label: 'VOLUNTEER',  btn2Href: 'https://www.newblueinteractive.com', btn2W: 200, btn2H: 50, btn2R: 8, btn2Bg: '#25408F', btn2Text: '#ffffff', btn2Border: '#ffffff', btn2Underline: 'underline',
        paidFor: 'PAID FOR BY YOUR CAMPAIGN',
        address: 'New Blue Interactive | PO Box 669 | Glen Cove, NY 11542',
        linkFewer: 'https://www.newblueinteractive.com',
        linkDonate: 'https://www.newblueinteractive.com',
        linkUnsub: 'https://www.newblueinteractive.com'
      });
      // reset inputs
      ['bgUrl','maxWidth','iconSize','iconGap','iconPad','btn1Label','btn1Href','btn1W','btn1H','btn1R','btn1Bg','btn1Text','btn1Border','btn1Underline','btn2Label','btn2Href','btn2W','btn2H','btn2R','btn2Bg','btn2Text','btn2Border','btn2Underline','paidFor','address','linkFewer','linkDonate','linkUnsub']
      .forEach(key => { el(key).value = state[key]; });
      drawIconEditors();
      render();
    }

    function toast(msg) {
      const t = document.createElement('div');
      t.textContent = msg;
      t.style.cssText = 'position:fixed;bottom:20px;right:20px;background:#111827;color:#fff;padding:10px 12px;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,.2);z-index:9999;font-size:12px;';
      document.body.appendChild(t);
      setTimeout(() => t.remove(), 2000);
    }

    bindBasics();
    drawIconEditors();
    render();
  </script>
</body>
</html>
